[gd_scene load_steps=31 format=4 uid="uid://dhn1m5at7ahu5"]

[ext_resource type="Script" uid="uid://cko32lxgqmhue" path="res://scripts/camera.gd" id="1_85g3d"]
[ext_resource type="Texture2D" uid="uid://c8ichhqq68qk4" path="res://sprites/tilemaps/grass_tilemap.png" id="2_a8y0u"]
[ext_resource type="PackedScene" uid="uid://dj1c5h2cw1g4m" path="res://scenes/packed/characters/player.tscn" id="2_choun"]
[ext_resource type="Texture2D" uid="uid://c3xnr14kovxyv" path="res://sprites/backgrounds/background4.png" id="2_muem4"]
[ext_resource type="Texture2D" uid="uid://bois1unhu3fan" path="res://sprites/backgrounds/background3.png" id="3_dp3eg"]
[ext_resource type="PackedScene" uid="uid://lh0msmgkv2ey" path="res://scenes/packed/items/item_coin.tscn" id="3_ya4ey"]
[ext_resource type="Texture2D" uid="uid://bahoisd6g7o33" path="res://sprites/backgrounds/background2.png" id="4_0ld40"]
[ext_resource type="Texture2D" uid="uid://cchxiaq7nqpff" path="res://sprites/backgrounds/background1.png" id="5_gqmmt"]
[ext_resource type="Texture2D" uid="uid://d1xn5whcus62d" path="res://sprites/backgrounds/foreground2.png" id="6_0ld40"]
[ext_resource type="Texture2D" uid="uid://bj3uxajacs3wl" path="res://sprites/backgrounds/foreground1.png" id="6_dp3eg"]
[ext_resource type="PackedScene" uid="uid://b6c0437xdr4dq" path="res://scenes/packed/characters/enemy.tscn" id="7_jkv2x"]
[ext_resource type="PackedScene" uid="uid://ivgm86b4arbt" path="res://scenes/packed/ui/hotbar.tscn" id="8_jbj1t"]
[ext_resource type="Script" uid="uid://d207eahu4wqa3" path="res://scripts/world_drop_zone.gd" id="9_muem4"]
[ext_resource type="PackedScene" uid="uid://dyc23nln5hmqk" path="res://scenes/packed/props/prop_tree.tscn" id="17_gqmmt"]
[ext_resource type="PackedScene" uid="uid://ytgcro6s0cmu" path="res://scenes/packed/items/item_emerald.tscn" id="17_jscy8"]
[ext_resource type="PackedScene" uid="uid://6d6wdo8felvi" path="res://scenes/packed/ui/heartbar.tscn" id="18_dp3eg"]
[ext_resource type="PackedScene" uid="uid://ddg5ktk2thoqh" path="res://scenes/packed/items/item_ruby.tscn" id="18_pm3ni"]
[ext_resource type="PackedScene" uid="uid://bqvuahjs2dfel" path="res://scenes/packed/props/prop_tree_stump.tscn" id="18_yc10j"]
[ext_resource type="PackedScene" uid="uid://b7l8viral71ia" path="res://scenes/packed/props/prop_rock1.tscn" id="19_jscy8"]
[ext_resource type="PackedScene" uid="uid://c8rmsjna4x64j" path="res://scenes/packed/items/item_diamond.tscn" id="19_y6deb"]
[ext_resource type="PackedScene" uid="uid://4ks8r0f8dfho" path="res://scenes/packed/props/prop_rock2.tscn" id="20_pm3ni"]
[ext_resource type="PackedScene" uid="uid://miq5biuvfuab" path="res://scenes/packed/props/prop_rock3.tscn" id="21_y6deb"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_dp3eg"]
normal = Vector2(0, 1)
distance = -45.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_muem4"]
distance = -50.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_0ld40"]
normal = Vector2(1, 0)
distance = -8.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_gqmmt"]
normal = Vector2(-1, 0)
distance = -670.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_a8y0u"]
texture = ExtResource("2_a8y0u")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
3:0/0/probability = 0.1
4:0/0 = 0
4:0/0/probability = 0.1
5:0/0 = 0
6:0/0 = 0
6:0/0/probability = 0.1
7:0/0 = 0
8:0/0 = 0
8:0/0/probability = 0.1
9:0/0 = 0
10:0/0 = 0
10:0/0/probability = 0.1
11:0/0 = 0
11:0/0/probability = 0.1
12:0/0 = 0
13:0/0 = 0
14:0/0 = 0
15:0/0 = 0

[sub_resource type="TileSet" id="TileSet_jkv2x"]
tile_size = Vector2i(32, 32)
sources/1 = SubResource("TileSetAtlasSource_a8y0u")

[sub_resource type="Shader" id="Shader_eb6dy"]
code = "shader_type canvas_item;

uniform vec4 outline_color : source_color = vec4(1.0, 1.0, 0.0, 1.0);
uniform float outline_width : hint_range(0.0, 20.0) = 4.0;
uniform bool show_outline = false;

void fragment() {
    vec4 color = texture(TEXTURE, UV);

    if (show_outline) {
        // Sample 8 directions around current pixel
        bool is_edge = false;

        for (float angle = 0.0; angle < 6.28; angle += 0.785) {
            vec2 dir = vec2(cos(angle), sin(angle));
            vec2 sample_uv = UV + dir * outline_width * TEXTURE_PIXEL_SIZE;

            // Check if we're at the edge (sample goes outside bounds or hits transparency)
            if (sample_uv.x < 0.0 || sample_uv.x > 1.0 ||
                sample_uv.y < 0.0 || sample_uv.y > 1.0) {
                is_edge = true;
                break;
            }
        }

        // Draw outline on edge pixels
        if (is_edge) {
            COLOR = outline_color;
        } else {
            COLOR = color;
        }
    } else {
        COLOR = color;
    }
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jscy8"]
resource_local_to_scene = true
shader = SubResource("Shader_eb6dy")
shader_parameter/outline_color = Color(0.5560702, 0.5560701, 0, 1)
shader_parameter/outline_width = 6.8400003249
shader_parameter/show_outline = true

[node name="Main" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="." groups=["camera"]]
limit_left = 0
limit_top = -90
limit_right = 665
limit_bottom = 90
script = ExtResource("1_85g3d")

[node name="World" type="Node2D" parent="." groups=["world"]]
y_sort_enabled = true

[node name="WorldBoundries" type="StaticBody2D" parent="World"]
collision_layer = 4
collision_mask = 3

[node name="BoundryTop" type="CollisionShape2D" parent="World/WorldBoundries"]
shape = SubResource("WorldBoundaryShape2D_dp3eg")

[node name="BoundryBottom" type="CollisionShape2D" parent="World/WorldBoundries"]
shape = SubResource("WorldBoundaryShape2D_muem4")

[node name="BoundryLeft" type="CollisionShape2D" parent="World/WorldBoundries"]
shape = SubResource("WorldBoundaryShape2D_0ld40")

[node name="BoundryRight" type="CollisionShape2D" parent="World/WorldBoundries"]
shape = SubResource("WorldBoundaryShape2D_gqmmt")

[node name="Background" type="Node2D" parent="World"]
z_index = -10

[node name="Layer1" type="Parallax2D" parent="World/Background"]
scroll_offset = Vector2(0, -67)
repeat_size = Vector2(320, 0)
repeat_times = 4

[node name="Sprite2D" type="Sprite2D" parent="World/Background/Layer1"]
texture = ExtResource("2_muem4")

[node name="Layer2" type="Parallax2D" parent="World/Background"]
scroll_scale = Vector2(0.8, 1)
scroll_offset = Vector2(0, -67)
repeat_size = Vector2(320, 0)
repeat_times = 4

[node name="Sprite2D" type="Sprite2D" parent="World/Background/Layer2"]
texture = ExtResource("3_dp3eg")

[node name="Layer3" type="Parallax2D" parent="World/Background"]
scroll_scale = Vector2(0.9, 1)
scroll_offset = Vector2(0, -67)
repeat_size = Vector2(320, 0)
repeat_times = 4

[node name="Sprite2D" type="Sprite2D" parent="World/Background/Layer3"]
texture = ExtResource("4_0ld40")

[node name="Layer4" type="Parallax2D" parent="World/Background"]
scroll_offset = Vector2(0, -67)
repeat_size = Vector2(320, 0)
repeat_times = 4

[node name="Sprite2D" type="Sprite2D" parent="World/Background/Layer4"]
texture = ExtResource("5_gqmmt")

[node name="Foreground" type="Node2D" parent="World"]
z_index = 99

[node name="Layer1" type="Parallax2D" parent="World/Foreground"]
z_index = -99
scroll_scale = Vector2(1.15, 1)
scroll_offset = Vector2(0, 80)
repeat_size = Vector2(320, 0)
repeat_times = 4

[node name="Sprite2D" type="Sprite2D" parent="World/Foreground/Layer1"]
texture = ExtResource("6_0ld40")

[node name="Layer2" type="Parallax2D" parent="World/Foreground"]
scroll_scale = Vector2(1.1, 1)
scroll_offset = Vector2(0, 80)
repeat_size = Vector2(320, 0)
repeat_times = 4

[node name="Sprite2D" type="Sprite2D" parent="World/Foreground/Layer2"]
texture = ExtResource("6_dp3eg")

[node name="TileMap" type="TileMapLayer" parent="World"]
z_index = -100
position = Vector2(-4, 19)
tile_map_data = PackedByteArray("AAD///7/AQAHAAAAAAD/////AQAMAAAAAAD//wAAAQACAAAAAAD//wEAAQABAAAAAAD//wIAAQAJAAAAAAAAAP7/AQACAAAAAAAAAP//AQANAAAAAAAAAAAAAQAFAAAAAAAAAAEAAQANAAAAAAAAAAIAAQAAAAAAAAABAP7/AQAJAAAAAAABAP//AQAHAAAAAAABAAAAAQANAAAAAAABAAEAAQAFAAAAAAABAAIAAQANAAAAAAACAP7/AQAPAAAAAAACAP//AQADAAAAAAACAAAAAQAAAAAAAAACAAEAAQANAAAAAAACAAIAAQAHAAAAAAADAP7/AQACAAAAAAADAP//AQAAAAAAAAADAAAAAQAJAAAAAAADAAEAAQAJAAAAAAADAAIAAQAAAAAAAAAEAP7/AQAPAAAAAAAEAP//AQAPAAAAAAAEAAAAAQABAAAAAAAEAAEAAQAOAAAAAAAEAAIAAQAAAAAAAAAFAP7/AQABAAAAAAAFAP//AQAAAAAAAAAFAAAAAQANAAAAAAAFAAEAAQAOAAAAAAAFAAIAAQANAAAAAAAGAP7/AQAPAAAAAAAGAP//AQAFAAAAAAAGAAAAAQAPAAAAAAAGAAEAAQAEAAAAAAAGAAIAAQADAAAAAAAHAP7/AQANAAAAAAAHAP//AQAJAAAAAAAHAAAAAQAHAAAAAAAHAAEAAQANAAAAAAAHAAIAAQAMAAAAAAAIAP7/AQABAAAAAAAIAP//AQAJAAAAAAAIAAAAAQACAAAAAAAIAAEAAQANAAAAAAAIAAIAAQABAAAAAAAJAP7/AQAHAAAAAAAJAP//AQABAAAAAAAJAAAAAQAAAAAAAAAJAAEAAQAKAAAAAAAJAAIAAQAOAAAAAAAKAP7/AQAJAAAAAAAKAP//AQAMAAAAAAAKAAAAAQANAAAAAAAKAAEAAQAJAAAAAAAKAAIAAQAAAAAAAAALAP7/AQAFAAAAAAALAP//AQAMAAAAAAALAAAAAQAHAAAAAAALAAEAAQANAAAAAAALAAIAAQAGAAAAAAAMAP7/AQANAAAAAAAMAP//AQAOAAAAAAAMAAAAAQANAAAAAAAMAAEAAQAKAAAAAAAMAAIAAQADAAAAAAANAP7/AQAMAAAAAAANAP//AQAAAAAAAAANAAAAAQAOAAAAAAANAAEAAQAJAAAAAAANAAIAAQANAAAAAAAOAP7/AQAJAAAAAAAOAP//AQACAAAAAAAOAAAAAQAEAAAAAAAOAAEAAQAJAAAAAAAOAAIAAQACAAAAAAAPAP7/AQAJAAAAAAAPAP//AQAOAAAAAAAPAAAAAQAHAAAAAAAPAAEAAQACAAAAAAAPAAIAAQAPAAAAAAAQAP7/AQAFAAAAAAAQAP//AQAMAAAAAAAQAAAAAQABAAAAAAAQAAEAAQAAAAAAAAAQAAIAAQAJAAAAAAARAP7/AQAHAAAAAAARAP//AQAAAAAAAAARAAAAAQAOAAAAAAARAAEAAQAHAAAAAAARAAIAAQAPAAAAAAASAP7/AQAHAAAAAAASAP//AQAJAAAAAAASAAAAAQAMAAAAAAASAAEAAQAMAAAAAAASAAIAAQAJAAAAAAATAP7/AQANAAAAAAATAP//AQACAAAAAAATAAAAAQAHAAAAAAATAAEAAQANAAAAAAATAAIAAQAOAAAAAAAUAP7/AQANAAAAAAAUAP//AQAFAAAAAAAUAAAAAQANAAAAAAAUAAEAAQACAAAAAAAUAAIAAQAKAAAAAAA=")
tile_set = SubResource("TileSet_jkv2x")

[node name="Player" parent="World" groups=["player"] instance=ExtResource("2_choun")]
material = SubResource("ShaderMaterial_jscy8")
position = Vector2(30, 28)
move_speed = 70.0

[node name="Enemy" parent="World" instance=ExtResource("7_jkv2x")]
position = Vector2(210, -14)
move_speed = 50.0

[node name="Enemy2" parent="World" instance=ExtResource("7_jkv2x")]
position = Vector2(502, 7)
move_speed = 50.0

[node name="PropTree" parent="World" instance=ExtResource("17_gqmmt")]
position = Vector2(228, 48)

[node name="PropTree2" parent="World" instance=ExtResource("17_gqmmt")]
position = Vector2(333, -11)

[node name="PropTree3" parent="World" instance=ExtResource("17_gqmmt")]
position = Vector2(471, 9)

[node name="PropTree4" parent="World" instance=ExtResource("17_gqmmt")]
position = Vector2(502, -7)

[node name="PropTree5" parent="World" instance=ExtResource("17_gqmmt")]
position = Vector2(561, 68)

[node name="PropTree6" parent="World" instance=ExtResource("17_gqmmt")]
position = Vector2(121, -14)

[node name="PropTreeStump1" parent="World" instance=ExtResource("18_yc10j")]
position = Vector2(153, 27)

[node name="PropTreeStump2" parent="World" instance=ExtResource("18_yc10j")]
position = Vector2(368, -40)

[node name="PropTreeStump3" parent="World" instance=ExtResource("18_yc10j")]
position = Vector2(656, -40)

[node name="PropTreeStump4" parent="World" instance=ExtResource("18_yc10j")]
position = Vector2(636, 51)

[node name="PropRock1_1" parent="World" instance=ExtResource("19_jscy8")]
position = Vector2(56, -12)

[node name="PropRock2_1" parent="World" instance=ExtResource("20_pm3ni")]
position = Vector2(307, 41)

[node name="PropRock2_2" parent="World" instance=ExtResource("20_pm3ni")]
position = Vector2(307, 41)

[node name="PropRock3_1" parent="World" instance=ExtResource("21_y6deb")]
position = Vector2(569, -23)

[node name="PropRock1_2" parent="World" instance=ExtResource("19_jscy8")]
position = Vector2(662, 45)

[node name="ItemCoin" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(95, -21)

[node name="ItemCoin12" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(-22, 69)

[node name="ItemCoin2" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(155, -31)

[node name="ItemCoin3" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(117, 39)

[node name="ItemCoin4" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(179, 6)

[node name="ItemCoin5" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(263, -34)

[node name="ItemCoin6" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(270, -30)

[node name="ItemCoin7" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(267, 43)

[node name="ItemCoin8" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(408, 36)

[node name="ItemCoin9" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(384, -32)

[node name="ItemCoin10" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(531, 62)

[node name="ItemCoin11" parent="World" instance=ExtResource("3_ya4ey")]
position = Vector2(582, -26)

[node name="ItemEmerald" parent="World" instance=ExtResource("17_jscy8")]
position = Vector2(-21, -33)

[node name="ItemEmerald2" parent="World" instance=ExtResource("17_jscy8")]
position = Vector2(203, 49)

[node name="ItemEmerald3" parent="World" instance=ExtResource("17_jscy8")]
position = Vector2(324, -14)

[node name="ItemEmerald4" parent="World" instance=ExtResource("17_jscy8")]
position = Vector2(517, 53)

[node name="ItemRuby" parent="World" instance=ExtResource("18_pm3ni")]
position = Vector2(165, 43)

[node name="ItemRuby2" parent="World" instance=ExtResource("18_pm3ni")]
position = Vector2(275, -39)

[node name="ItemRuby3" parent="World" instance=ExtResource("18_pm3ni")]
position = Vector2(436, 61)

[node name="ItemRuby4" parent="World" instance=ExtResource("18_pm3ni")]
position = Vector2(451.00003, -22)

[node name="ItemDiamond" parent="World" instance=ExtResource("19_y6deb")]
position = Vector2(262, 9)

[node name="ItemDiamond2" parent="World" instance=ExtResource("19_y6deb")]
position = Vector2(-30, 64)

[node name="ItemDiamond3" parent="World" instance=ExtResource("19_y6deb")]
position = Vector2(520, -12)

[node name="UI" type="CanvasLayer" parent="."]

[node name="WorldDropZone" type="Control" parent="UI" groups=["player"]]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 320.0
offset_bottom = 180.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("9_muem4")
world_item_scene = ExtResource("3_ya4ey")

[node name="Inventory" parent="UI" instance=ExtResource("8_jbj1t")]

[node name="Heartbar" parent="UI" instance=ExtResource("18_dp3eg")]

[connection signal="mouse_exited" from="UI/WorldDropZone" to="UI/WorldDropZone" method="_on_mouse_exited"]
