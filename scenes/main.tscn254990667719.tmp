[gd_scene load_steps=15 format=3 uid="uid://dhn1m5at7ahu5"]

[ext_resource type="PackedScene" uid="uid://dj1c5h2cw1g4m" path="res://scenes/packed/player.tscn" id="1_0wfyh"]
[ext_resource type="PackedScene" uid="uid://fror435gqham" path="res://scenes/packed/inventory.tscn" id="1_o5qli"]
[ext_resource type="PackedScene" uid="uid://lh0msmgkv2ey" path="res://scenes/packed/world_item.tscn" id="2_jyhfs"]
[ext_resource type="PackedScene" uid="uid://byyog52drooaw" path="res://scenes/packed/platform.tscn" id="2_trceg"]
[ext_resource type="Script" uid="uid://d207eahu4wqa3" path="res://scripts/world_drop_zone.gd" id="3_sugp2"]
[ext_resource type="Resource" uid="uid://bf1cpvg7e8f65" path="res://resources/items/item_red.tres" id="3_tefeu"]
[ext_resource type="Resource" uid="uid://bnkkbe2flad52" path="res://resources/items/item_green.tres" id="4_ya4ey"]
[ext_resource type="Resource" uid="uid://cl6kob1u26wxn" path="res://resources/items/item_blue.tres" id="5_trceg"]
[ext_resource type="Resource" uid="uid://0ofvbpup2cr4" path="res://resources/items/item_gray2.tres" id="6_trceg"]
[ext_resource type="Resource" uid="uid://yeqb6sap60dw" path="res://resources/items/item_gray3.tres" id="7_a8y0u"]
[ext_resource type="Resource" uid="uid://pvulga0i03tr" path="res://resources/items/item_gray4.tres" id="8_jkv2x"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qycdh"]
size = Vector2(40, 40)

[sub_resource type="Shader" id="Shader_eb6dy"]
code = "shader_type canvas_item;

uniform vec4 outline_color : source_color = vec4(1.0, 1.0, 0.0, 1.0);
uniform float outline_width : hint_range(0.0, 20.0) = 4.0;
uniform bool show_outline = false;

void fragment() {
    vec4 color = texture(TEXTURE, UV);

    if (show_outline) {
        // Sample 8 directions around current pixel
        bool is_edge = false;

        for (float angle = 0.0; angle < 6.28; angle += 0.785) {
            vec2 dir = vec2(cos(angle), sin(angle));
            vec2 sample_uv = UV + dir * outline_width * TEXTURE_PIXEL_SIZE;

            // Check if we're at the edge (sample goes outside bounds or hits transparency)
            if (sample_uv.x < 0.0 || sample_uv.x > 1.0 ||
                sample_uv.y < 0.0 || sample_uv.y > 1.0) {
                is_edge = true;
                break;
            }
        }

        // Draw outline on edge pixels
        if (is_edge) {
            COLOR = outline_color;
        } else {
            COLOR = color;
        }
    } else {
        COLOR = color;
    }
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_trceg"]
resource_local_to_scene = true
shader = SubResource("Shader_eb6dy")
shader_parameter/outline_color = Color(0.5560702, 0.5560701, 0, 1)
shader_parameter/outline_width = 6.8400003249
shader_parameter/show_outline = true

[node name="Main" type="Node2D"]

[node name="World" type="Node2D" parent="."]

[node name="Sky" type="ColorRect" parent="World"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1920.0
offset_bottom = 1080.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.5647059, 0.5647059, 0.5647059, 1)

[node name="Ground" parent="World" instance=ExtResource("2_trceg")]
position = Vector2(959.99994, 938)
scale = Vector2(54.362206, 8.423152)

[node name="Platform" parent="World" instance=ExtResource("2_trceg")]
position = Vector2(568, 456)
scale = Vector2(14.905454, 2.5054576)

[node name="Left Barrier" type="StaticBody2D" parent="World"]
position = Vector2(-76, 231)
rotation = 1.5707964
scale = Vector2(26.945454, 2.5054576)

[node name="CollisionShape2D" type="CollisionShape2D" parent="World/Left Barrier"]
shape = SubResource("RectangleShape2D_qycdh")

[node name="Right Barrier" type="StaticBody2D" parent="World"]
position = Vector2(1997, 231)
rotation = 1.5707964
scale = Vector2(26.945454, 2.5054576)

[node name="CollisionShape2D" type="CollisionShape2D" parent="World/Right Barrier"]
shape = SubResource("RectangleShape2D_qycdh")

[node name="WorldItemRed" parent="World" instance=ExtResource("2_jyhfs")]
position = Vector2(348, 755)
item_data = ExtResource("3_tefeu")

[node name="WorldItemGreen" parent="World" instance=ExtResource("2_jyhfs")]
position = Vector2(513.00006, 391)
item_data = ExtResource("4_ya4ey")

[node name="WorldItemBlue" parent="World" instance=ExtResource("2_jyhfs")]
position = Vector2(1133, 755)
item_data = ExtResource("5_trceg")

[node name="WorldItemGray3" parent="World" instance=ExtResource("2_jyhfs")]
position = Vector2(400, 755)
item_data = ExtResource("7_a8y0u")

[node name="WorldItemGray4" parent="World" instance=ExtResource("2_jyhfs")]
position = Vector2(459, 391)
item_data = ExtResource("8_jkv2x")

[node name="WorldItemGray2" parent="World" instance=ExtResource("2_jyhfs")]
position = Vector2(564, 391)
item_data = ExtResource("6_trceg")

[node name="Player" parent="World" groups=["player"] instance=ExtResource("1_0wfyh")]
material = SubResource("ShaderMaterial_trceg")
position = Vector2(150, 670)

[node name="UI" type="CanvasLayer" parent="."]

[node name="Inventory" parent="UI" groups=["inventory"] instance=ExtResource("1_o5qli")]

[node name="WorldDropZone" type="Control" parent="." groups=["player"]]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -1.0
offset_right = 1919.0
offset_bottom = 1080.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("3_sugp2")

[connection signal="mouse_exited" from="WorldDropZone" to="WorldDropZone" method="_on_mouse_exited"]
